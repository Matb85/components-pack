<div class="MP-viewer" role="button" tabindex="-1" title="Podgląd zdjęcia - kliknij by zamknąć">
  <button title="Zamknij podgląd" id="close-viewer"></button>
  <img id="MP-viewer-viewed-photo" class="viewed-photo" alt="Powiększone zdjęcie" />
</div>

<script>
  import { mixin } from "@matb85/base-pack";
  import { GlobalConfig } from "virtual:@matb85/astro-pack";

  const img = document.getElementById("MP-viewer-viewed-photo") as HTMLImageElement;

  window.addEventListener("enlargePhoto", event => mixin.mounted((event as CustomEvent).detail, img.parentElement!, img, GlobalConfig));

  window.addEventListener("keyup", e => {
    if (e.key === "Escape") mixin.close(img.parentElement!, img);
  });

  img.parentElement!.addEventListener("click", () => mixin.close(img.parentElement!, img));
</script>
