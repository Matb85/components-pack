import{S as m,a as w}from"./index.MGJcI3eh.js";const u=new Set,s=new WeakSet;let d=!0,h,l=!1;function g(e){l||(l=!0,d??=!1,h??="hover",E(),y(),L(),S())}function E(){for(const e of["touchstart","mousedown"])document.body.addEventListener(e,t=>{a(t.target,"tap")&&c(t.target.href,{ignoreSlowConnection:!0})},{passive:!0})}function y(){let e;document.body.addEventListener("focusin",o=>{a(o.target,"hover")&&t(o)},{passive:!0}),document.body.addEventListener("focusout",n,{passive:!0}),f(()=>{for(const o of document.getElementsByTagName("a"))s.has(o)||a(o,"hover")&&(s.add(o),o.addEventListener("mouseenter",t,{passive:!0}),o.addEventListener("mouseleave",n,{passive:!0}))});function t(o){const r=o.target.href;e&&clearTimeout(e),e=setTimeout(()=>{c(r)},80)}function n(){e&&(clearTimeout(e),e=0)}}function L(){let e;f(()=>{for(const t of document.getElementsByTagName("a"))s.has(t)||a(t,"viewport")&&(s.add(t),e??=P(),e.observe(t))})}function P(){const e=new WeakMap;return new IntersectionObserver((t,n)=>{for(const o of t){const r=o.target,i=e.get(r);o.isIntersecting?(i&&clearTimeout(i),e.set(r,setTimeout(()=>{n.unobserve(r),e.delete(r),c(r.href)},300))):i&&(clearTimeout(i),e.delete(r))}})}function S(){f(()=>{for(const e of document.getElementsByTagName("a"))a(e,"load")&&c(e.href)})}function c(e,t){e=e.replace(/#.*/,"");const n=t?.ignoreSlowConnection??!1;if(k(e,n))if(u.add(e),document.createElement("link").relList?.supports?.("prefetch")&&t?.with!=="fetch"){const o=document.createElement("link");o.rel="prefetch",o.setAttribute("href",e),document.head.append(o)}else fetch(e,{priority:"low"})}function k(e,t){if(!navigator.onLine||!t&&v())return!1;try{const n=new URL(e,location.href);return location.origin===n.origin&&(location.pathname!==n.pathname||location.search!==n.search)&&!u.has(e)}catch{}return!1}function a(e,t){if(e?.tagName!=="A")return!1;const n=e.dataset.astroPrefetch;return n==="false"?!1:t==="tap"&&(n!=null||d)&&v()?!0:n==null&&d||n===""?t===h:n===t}function v(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/2g/.test(e.effectiveType)}return!1}function f(e){e();let t=!1;document.addEventListener("astro:page-load",()=>{if(!t){t=!0;return}e()})}window.astroPack=m();console.log("astroPack ready",window.astroPack);function p(e=document.querySelectorAll(".MP-photo:not(.MP-dont-load) > img")){e.forEach(t=>{t.dataset?.prevent?.includes("addtolist")||t.addEventListener("load",()=>w.addPhoto(window.astroPack,{src:t.dataset.minsrc,srcset:t.dataset.minsrc,group:t.dataset.group,alt:t.alt}),{once:!0}),window.astroPack.observer.observe(t);const n=t.parentElement;n.classList.contains("no-hover")||t.dataset?.prevent?.includes("enlargeonclick")||n.addEventListener("click",()=>{const r=(t.dataset.multi==""||t.dataset.multi||"false")=="false"?"enlargePhoto":"enlargeManyPhotos";window.dispatchEvent(new CustomEvent(r,{detail:{rect:n.getBoundingClientRect(),img:t}}))})})}window.addEventListener("load",()=>p());window.addEventListener("MP-addPhotos",e=>p(e.detail));g();
